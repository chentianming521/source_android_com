<!DOCTYPE html>











































































































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<meta name="Description" content="Android includes Stagefright, a media playback engine at the native level that has built-in software-based codecs for popular media formats. Stagefright audio and video playback features include integration with OpenMAX codecs, session management, time-synchronizedâ€¦">

<link rel="shortcut icon" type="image/x-icon" href="http://source.android.com/favicon.ico" />
<title>Media | Android Open Source Project</title>

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto:regular,medium,thin,italic,mediumitalic,bold" title="roboto">
<link href="http://source.android.com/assets/css/default.css" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="http://source.android.com/assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "/";
  
  var devsite = false;
  
</script>
<script src="http://source.android.com/assets/js/docs.js" type="text/javascript"></script>

<script src="http://source.android.com/navtree_data.js" type="text/javascript"></script>


<script type="text/javascript" src="http://www.gstatic.com/feedback/api.js"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45455297-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body class="gc-documentation 
  " itemscope itemtype="http://schema.org/Article">
<a name="top"></a>

  
    <!-- Header -->
    <div id="header">
        <div class="wrap" id="header-wrap">
          <div class="col-3 saclogo">
          <a href="http://source.android.com/index.html">
            <img src="http://source.android.com/assets/images/sac_logo.png"
                srcset="/assets/images/sac_logo@2x.png 2x"
                width="123" height="25" alt="Android Open Source Project" />
          </a>
          </div>
            <ul class="nav-x col-9">
                <li class="source">
                  <a href="http://source.android.com/source/index.html" 
                  >Source</a></li>
                <li class="devices"><a href="http://source.android.com/devices/index.html" class="selected"
                  >Devices</a></li>
                <li class="security"><a href="http://source.android.com/security/index.html" 
                  >Security</a></li>
                <li class="compatibility last"><a href="http://source.android.com/compatibility/index.html" 
                  >Compatibility</a></li>
            </ul>
            <!-- New Search -->
            <div class="menu-container">
            <div class="moremenu">
    <div id="more-btn"></div>
  </div>
  <div class="morehover" id="moremenu">
    <div class="top"></div>
    <div class="mid">
      <div class="header">Android Sites</div>
      <ul>
        <li class="active"><a>Android Open Source Project</a></li>
        <li><a href="http://www.android.com">Android.com</a></li>
        <li><a href="http://developer.android.com">Android Developers</a></li>
      </ul>
      <!-- <div class="header">Support</div>
      <ul>
        <li><a href="/support.html">Developer Support</a></li>
      </ul> -->
      <br class="clearfix" />
    </div>
    <div class="bottom"></div>
  </div>

  <div class="search" id="search-container">
    <div class="search-inner">
      <div id="search-btn"></div>
      <div class="left"></div>
      <form onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
onkeydown="return search_changed(event, true, '/')"
onkeyup="return search_changed(event, false, '/')" />
      </form>
      <div class="right"></div>
        <a class="close hide">close</a>
        <div class="left"></div>
        <div class="right"></div>
    </div>
  </div>
  <div id="search_filtered_wrapper">
    <div id="search_filtered_div" class="no-display">
        <ul id="search_filtered">
        </ul>
    </div>
  </div>

  </div>
  <!-- /New Search> -->
        </div>
    </div>
    <!-- /Header -->

  <div id="searchResults" class="wrap" style="display:none;">
          <h2 id="searchTitle">Results</h2>
          <div id="leftSearchControl" class="search-control">Loading...</div>
  </div>

  
  
  
    
  <div class="wrap clearfix" id="body-content">
    <div class="col-4" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <div id="devdoc-nav" class="scroll-pane">
<a class="totop" href="index.html#top" data-g-event="left-nav-top">to top</a>

<!--
    Copyright 2015 The Android Open Source Project

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<ul id="nav">
  <li class="nav-section">  <!-- Begin nav section, Device Interfaces -->
    <div class="nav-section-header">
      <a href="http://source.android.com/devices/index.html">
        <span class="en">Interfaces</span>
      </a>
    </div>
    <ul>
  <li class="nav-section">
  <div class="nav-section-header">
      <a href="http://source.android.com/devices/accessories/index.html">
        <span class="en">Accessories</span>
      </a>
    </div>
    <ul>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/accessories/audio.html">
            <span class="en">Audio Accessories</span>
          </a>
        </div>
        <ul>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/accessories/headset/index.html">
            <span class="en">Headset</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/accessories/headset/specification.html">Specification</a></li>
          <li><a href="http://source.android.com/devices/accessories/headset/requirements.html">Requirements</a></li>
          <li><a href="http://source.android.com/devices/accessories/headset/testing.html">Testing</a></li>
        </ul>
      </li>
        </ul>
      </li>
  <li class="nav-section">
  <div class="nav-section-header">
      <a href="http://source.android.com/devices/accessories/custom.html">
        <span class="en">Custom Accessories</span>
      </a>
    </div>
    <ul>
      <li class="nav-section">
        <div class="nav-section-header"><a href="http://source.android.com/devices/accessories/protocol.html"><span class="en">AOA</span>
        </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/accessories/aoa2.html">AOA 2.0</a></li>
          <li><a href="http://source.android.com/devices/accessories/aoa.html">AOA 1.0</a></li>
        </ul>
        </li>
        <div class="nav-section-header"><a href="http://source.android.com/devices/accessories/stylus.html"><span class="en">Stylus</span>
        </a>
        </div>
       </ul>
     </li>
    </ul>
      <li class="nav-section">
      <div class="nav-section-header">
        <a href="http://source.android.com/devices/audio/index.html">
          <span class="en">Audio</span>
        </a>
      </div>
        <ul>
          <li><a href="http://source.android.com/devices/audio/terminology.html">Terminology</a></li>
          <li class="nav-section">
            <div class="nav-section-header">
              <a href="http://source.android.com/devices/audio/implement.html">
                <span class="en">Implementation</span>
              </a>
            </div>
            <ul>
              <li><a href="http://source.android.com/devices/audio/implement-policy.html">Policy Configuration</a></li>
              <li><a href="http://source.android.com/devices/audio/implement-shared-library.html">Shared Library</a></li>
              <li><a href="http://source.android.com/devices/audio/implement-pre-processing.html">Pre-processing Effects</a></li>
            </ul>
         </li>
          <li><a href="http://source.android.com/devices/audio/data_formats.html">Data Formats</a></li>
          <li><a href="http://source.android.com/devices/audio/attributes.html">Attributes</a></li>
          <li><a href="http://source.android.com/devices/audio/warmup.html">Warmup</a></li>
          <li class="nav-section">
            <div class="nav-section-header">
              <a href="http://source.android.com/devices/audio/latency.html">
                <span class="en">Latency</span>
              </a>
            </div>
            <ul>
              <li><a href="http://source.android.com/devices/audio/latency_contrib.html">Contributors</a></li>
              <li><a href="http://source.android.com/devices/audio/latency_design.html">Design</a></li>
              <li><a href="http://source.android.com/devices/audio/latency_measure.html">Measure</a></li>
              <li><a href="http://source.android.com/devices/audio/testing_circuit.html">Light Testing Circuit</a></li>
              <li><a href="http://source.android.com/devices/audio/loopback.html">Audio Loopback Dongle</a></li>
              <li><a href="http://source.android.com/devices/audio/latency_measurements.html">Measurements</a></li>
              <li><a href="http://source.android.com/devices/audio/latency_app.html">Applications</a></li>
            </ul>
          </li>
          <li><a href="http://source.android.com/devices/audio/avoiding_pi.html">Priority Inversion</a></li>
          <li><a href="http://source.android.com/devices/audio/src.html">Sample Rate Conversion</a></li>
          <li><a href="http://source.android.com/devices/audio/debugging.html">Debugging</a></li>
          <li class="nav-section">
            <div class="nav-section-header">
              <a href="http://source.android.com/devices/audio/midi.html">
                <span class="em">MIDI</span>
              </a>
            </div>
            <ul>
              <li><a href="http://source.android.com/devices/audio/midi_arch.html">MIDI Architecture</a></li>
              <li><a href="http://source.android.com/devices/audio/midi_test.html">MIDI Test Procedure</a></li>
            </ul>
          <li><a href="http://source.android.com/devices/audio/usb.html">USB Digital Audio</a></li>
          <li><a href="http://source.android.com/devices/audio/tv.html">TV Audio</a></li>
        </ul>
      </li>
      <li><a href="http://source.android.com/devices/automotive.html">Automotive</a></li>
      <li><a href="http://source.android.com/devices/bluetooth.html">Bluetooth</a></li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/camera/index.html">
            <span class="en">Camera</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/camera/camera3.html">Camera HAL3</a></li>
          <li><a href="http://source.android.com/devices/camera/camera3_requests_hal.html">HAL Subsystem</a></li>
          <li><a href="http://source.android.com/devices/camera/camera3_metadata.html">Metadata and Controls</a></li>
          <li><a href="http://source.android.com/devices/camera/camera3_3Amodes.html">3A Modes and State</a></li>
          <li><a href="http://source.android.com/devices/camera/camera3_crop_reprocess.html">Output and Cropping</a></li>
          <li><a href="http://source.android.com/devices/camera/camera3_error_stream.html">Errors and Streams</a></li>
          <li><a href="http://source.android.com/devices/camera/camera3_requests_methods.html">Request Creation</a></li>
          <li><a href="http://source.android.com/devices/camera/versioning.html">Version Support</a></li>
        </ul>
      </li>

      <li><a href="http://source.android.com/devices/drm.html">DRM</a></li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/graphics/index.html">
            <span class="en">Graphics</span>
          </a>
        </div>
        <ul>
         <li class="nav-section">
            <div class="nav-section-header">
              <a href="http://source.android.com/devices/graphics/architecture.html">
                <span class="en">Architecture</span>
              </a>
            </div>
            <ul>
              <li><a href="http://source.android.com/devices/graphics/arch-bq-gralloc.html">BufferQueue</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-sf-hwc.html">SurfaceFlinger and HWC</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-sh.html">Surface and SurfaceHolder</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-egl-opengl.html">OpenGL ES</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-vulkan.html">Vulkan</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-sv-glsv.html">SurfaceView</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-st.html">SurfaceTexture</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-tv.html">TextureView</a></li>
              <li><a href="http://source.android.com/devices/graphics/arch-gameloops.html">Game Loops</a></li>
            </ul>
         </li>
         <li class="nav-section">
            <div class="nav-section-header">
              <a href="http://source.android.com/devices/graphics/implement.html">
                <span class="en">Implementing</span>
              </a>
            </div>
            <ul>
              <li><a href="http://source.android.com/devices/graphics/implement-hwc.html">Hardware Composer HAL</a></li>
              <li><a href="http://source.android.com/devices/graphics/implement-vsync.html">VSYNC</a></li>
              <li><a href="http://source.android.com/devices/graphics/implement-vulkan.html">Vulkan</a></li>
              <li><a href="http://source.android.com/devices/graphics/implement-vdisplays.html">Virtual Displays</a></li>
            </ul>
         </li>
         <li class="nav-section">
            <div class="nav-section-header">
              <a href="http://source.android.com/devices/graphics/testing.html">
                <span class="en">OpenGL ES Testing</span>
              </a>
            </div>
            <ul>
              <li><a href="http://source.android.com/devices/graphics/build-tests.html">Building test programs</a></li>
              <li><a href="http://source.android.com/devices/graphics/port-tests.html">Porting the test framework</a></li>
              <li><a href="http://source.android.com/devices/graphics/run-tests.html">Running the tests</a></li>
              <li><a href="http://source.android.com/devices/graphics/automate-tests.html">Automating the tests</a></li>
              <li><a href="http://source.android.com/devices/graphics/test-groups.html">Using special test groups</a></li>
              <li><a href="http://source.android.com/devices/graphics/cts-integration.html">Integrating with Android CTS</a></li>
            </ul>
         </li>
        </ul> </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/input/index.html">
            <span class="en">Input</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/input/overview.html">Overview</a></li>
          <li><a href="http://source.android.com/devices/input/key-layout-files.html">Key Layout Files</a></li>
          <li><a href="http://source.android.com/devices/input/key-character-map-files.html">Key Character Map Files</a></li>
          <li><a href="http://source.android.com/devices/input/input-device-configuration-files.html">Input Device Configuration Files</a></li>
          <li><a href="http://source.android.com/devices/input/migration-guide.html">Migration Guide</a></li>
          <li><a href="http://source.android.com/devices/input/keyboard-devices.html">Keyboard Devices</a></li>
          <li><a href="../input/touch-devices.html">Touch Devices</a></li>
          <li><a href="../input/diagnostics.html">Diagnostics</a></li>
          <li><a href="http://source.android.com/devices/input/getevent.html">Getevent</a></li>
          <li><a href="http://source.android.com/devices/input/validate-keymaps.html">Validate Keymaps</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="index.html">
            <span class="en">Media</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/media/framework-hardening.html">Framework
          Hardening</a></li>
          <li><a href="http://source.android.com/devices/media/soc.html">SoC Dependencies</a></li>
          <li><a href="http://source.android.com/devices/media/oem.html">OEM Dependencies</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/sensors/index.html">
            <span class="en">Sensors</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/sensors/sensor-stack.html">Sensor stack</a></li>
          <li><a href="http://source.android.com/devices/sensors/report-modes.html">Reporting modes</a></li>
          <li><a href="http://source.android.com/devices/sensors/suspend-mode.html">Suspend mode</a></li>
          <li><a href="http://source.android.com/devices/sensors/power-use.html">Power consumption</a></li>
          <li><a href="http://source.android.com/devices/sensors/interaction.html">Interaction</span></a></li>
          <li><a href="http://source.android.com/devices/sensors/hal-interface.html">HAL interface</a></li>
          <li><a href="http://source.android.com/devices/sensors/batching.html">Batching</a></li>
          <li><a href="http://source.android.com/devices/sensors/sensor-types.html">Sensor types</a></li>
          <li><a href="http://source.android.com/devices/sensors/versioning.html">Version deprecation</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/storage/index.html">
            <span class="en">Storage</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/storage/traditional.html">Traditional Storage</a></li>
          <li><a href="http://source.android.com/devices/storage/adoptable.html">Adoptable Storage</a></li>
          <li><a href="http://source.android.com/devices/storage/config.html">Device Configuration</a></li>
          <li><a href="http://source.android.com/devices/storage/config-example.html">Configuration Examples</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/tv/index.html">
            <span class="en">TV</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tv/HDMI-CEC.html">HDMI-CEC control service</a></li>
          <li><a href="http://source.android.com/devices/tv/reference-tv-app.html">Reference TV App</a></li>
        </ul>
      </li>
    </ul>
  </li> <!-- End nav-section, Device Interfaces-->


  <li class="nav-section"> <!--Begin nav-section, Core Technologies-->
    <div class="nav-section-header">
      <a href="http://source.android.com/devices/tech/index.html">
        <span class="en">Core Technologies</span>
      </a>
    </div>

    <ul>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/tech/dalvik/index.html">
          <span class="en">ART and Dalvik</span></a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/dalvik/dalvik-bytecode.html">Bytecode Format</a></li>
          <li><a href="http://source.android.com/devices/tech/dalvik/dex-format.html">.Dex Format</a></li>
          <li><a href="http://source.android.com/devices/tech/dalvik/instruction-formats.html">Instruction Formats</a></li>
          <li><a href="http://source.android.com/devices/tech/dalvik/constraints.html">Constraints</a></li>
          <li><a href="http://source.android.com/devices/tech/dalvik/configure.html">Configuration</a></li>
          <li><a href="http://source.android.com/devices/tech/dalvik/gc-debug.html">Garbage Collection</a></li>
          <li><a href="http://source.android.com/devices/tech/dalvik/jit-compiler.html">JIT Compilation</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="http://source.android.com/devices/tech/config/index.html">
              <span class="en">Configuration</span>
            </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/config/carrier.html">Carrier Customization</a></li>
          <li><a href="http://source.android.com/devices/tech/config/connect_tests.html">Connectivity Tests</a></li>
          <li><a href="http://source.android.com/devices/tech/config/filesystem.html">File System</a></li>
          <li><a href="http://source.android.com/devices/tech/config/kernel.html">Kernel Configuration</a></li>
          <li><a href="http://source.android.com/devices/tech/config/kernel_network_tests.html">Kernel Network Tests</a></li>
          <li><a href="http://source.android.com/devices/tech/config/low-ram.html">Low RAM</a></li>
          <li><a href="http://source.android.com/devices/tech/config/namespaces_libraries.html">Namespaces for Libraries</a></li>
          <li><a href="http://source.android.com/devices/tech/config/renderer.html">OpenGLRenderer</a></li>
          <li><a href="http://source.android.com/devices/tech/config/runtime_perms.html">Runtime Permissions</a></li>
          <li><a href="http://source.android.com/devices/tech/config/uicc.html">UICC</a></li>
          <li><a href="http://source.android.com/devices/tech/config/voicemail.html">Visual Voicemail</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="http://source.android.com/devices/tech/connect/index.html">
              <span class="en">Connectivity</span>
            </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/connect/block-numbers.html">Block Phone Numbers</a></li>
          <li><a href="http://source.android.com/devices/tech/connect/call-notification.html">Call Notifications</a></li>
          <li><a href="http://source.android.com/devices/tech/connect/data-saver.html">Data Saver Mode</a></li>
          <li><a href="http://source.android.com/devices/tech/connect/felica.html">Host Card Emulation of FeliCa</a></li>
          <li><a href="http://source.android.com/devices/tech/connect/ril.html">Radio Interface Layer (RIL)</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/tech/datausage/index.html">
            <span class="en">Data Usage</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/datausage/iface-overview.html">Network interface statistics overview</a></li>
          <li><a href="http://source.android.com/devices/tech/datausage/excluding-network-types.html">Excluding Network Types from Data Usage</a></li>
          <li><a href="http://source.android.com/devices/tech/datausage/tethering-data.html">Tethering Data</a></li>
          <li><a href="http://source.android.com/devices/tech/datausage/usage-cycle-resets-dates.html">Usage Cycle Reset Dates</a></li>
          <li><a href="http://source.android.com/devices/tech/datausage/kernel-overview.html">Kernel Overview</a></li>
          <li><a href="http://source.android.com/devices/tech/datausage/tags-explained.html">Data Usage Tags Explained</a></li>
          <li><a href="http://source.android.com/devices/tech/datausage/kernel-changes.html">Kernel Changes</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/tech/debug/index.html">
            <span class="en">Debugging</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/debug/asan.html">AddressSanitizer</a></li>
          <li><a href="http://source.android.com/devices/tech/debug/dumpsys.html">Dumpsys</a></li>
          <li><a href="http://source.android.com/devices/tech/debug/native-memory.html">Native Memory Use</a></li>
          <li><a href="http://source.android.com/devices/tech/debug/netstats.html">Network Use</a></li>
          <li><a href="http://source.android.com/devices/tech/debug/procstats.html">RAM Use</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/tech/admin/index.html">
          <span class="en">Device Administration</span></a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/admin/implement.html">Implementation</a></li>
          <li><a href="http://source.android.com/devices/tech/admin/multi-user.html">Multiple Users</a></li>
          <li><a href="http://source.android.com/devices/tech/admin/managed-profiles.html">Managed Profiles</a></li>
          <li><a href="http://source.android.com/devices/tech/admin/provision.html">Provisioning</a></li>
          <li><a href="http://source.android.com/devices/tech/admin/multiuser-apps.html">Multiuser Apps</a></li>
          <li><a href="http://source.android.com/devices/tech/admin/enterprise-telephony.html">Enterprise Telephony</a></li>
          <li><a href="http://source.android.com/devices/tech/admin/testing-provision.html">Testing Device Provisioning</a></li>
          <li><a href="http://source.android.com/devices/tech/admin/testing-setup.html">Testing Device Administration</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="http://source.android.com/devices/tech/display/index.html">
              <span class="en">Display Settings</span></a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/display/dnd.html">Do Not Disturb</a></li>
          <li><a href="http://source.android.com/devices/tech/display/multi-window.html">Multi-Window</a></li>
          <li><a href="http://source.android.com/devices/tech/display/hdr.html">HDR Video</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header empty">
          <a href="http://source.android.com/devices/halref/index.html">
            <span class="en">HAL File Reference</span>
          </a>
        </div>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="http://source.android.com/devices/tech/ota/index.html">
              <span class="en">OTA Updates</span>
            </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/ota/tools.html">OTA Tools</a></li>
          <li><a href="http://source.android.com/devices/tech/ota/block.html">Block-based OTA</a></li>
          <li><a href="http://source.android.com/devices/tech/ota/inside_packages.html">Inside OTA Packages</a></li>
          <li><a href="http://source.android.com/devices/tech/ota/device_code.html">Device-Specific Code</a></li>
          <li><a href="http://source.android.com/devices/tech/ota/reduce_size.html">Reducing OTA Size</a></li>
          <li><a href="http://source.android.com/devices/tech/ota/sign_builds.html">Signing Builds for Release</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/tech/power/index.html"><span class="en">Power</span></a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/power/mgmt.html">Power Management</a></li>
          <li><a href="http://source.android.com/devices/tech/power/performance.html">Performance Management</a></li>
          <li><a href="http://source.android.com/devices/tech/power/component.html">Component Power</a></li>
          <li><a href="http://source.android.com/devices/tech/power/device.html">Device Power</a></li>
          <li><a href="http://source.android.com/devices/tech/power/values.html">Power Values</a></li>
          <li><a href="http://source.android.com/devices/tech/power/batterystats.html">Battery Use</a>
          </li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="http://source.android.com/devices/tech/test_infra/tradefed/index.html">
            <span class="en">Testing Infrastructure</span>
          </a>
        </div>
        <ul>
          <li><a href="http://source.android.com/devices/tech/test_infra/tradefed/fundamentals/index.html">Start Here</a></li>
          <li><a href="http://source.android.com/devices/tech/test_infra/tradefed/fundamentals/machine_setup.html">Machine Setup</a></li>
          <li><a href="http://source.android.com/devices/tech/test_infra/tradefed/fundamentals/devices.html">Working with Devices</a></li>
          <li><a href="http://source.android.com/devices/tech/test_infra/tradefed/fundamentals/lifecycle.html">Test Lifecycle</a></li>
          <li><a href="http://source.android.com/devices/tech/test_infra/tradefed/fundamentals/options.html">Option Handling</a></li>
          <li><a href="http://source.android.com/devices/tech/test_infra/tradefed/full_example.html">An End-to-End Example</a></li>
          <li id="tradefed-tree-list" class="nav-section">
            <div class="nav-section-header">
              <a href="http://source.android.com/reference/packages.html">
                <span class="en">Package Index</span>
              </a>
            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li> <!-- End nav-section, Core Technologies -->
</ul> 


      </div>
      <script type="text/javascript">
        showTradefedRefTree();
      </script>
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>

  




<div class="col-12" id="doc-col" >


  
    
      
        <h1 itemprop="name" >Media</h1>
      
    
  


  
  <div id="jd-content">

    <div class="jd-descr" itemprop="articleBody">
    <!--
    Copyright 2015 The Android Open Source Project

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<div id="qv-wrapper">
  <div id="qv">
    <h2>In this document</h2>
    <ol id="auto-toc">
    </ol>
  </div>
</div>

<img style="float: right; margin: 0px 15px 15px 15px;"
src="http://source.android.com/devices/media/images/ape_fwk_hal_media.png" alt="Android Media HAL icon"/>

<p>Android includes Stagefright, a media playback engine at the native level
that has built-in software-based codecs for popular media formats.</p>

<p>Stagefright audio and video playback features include integration with
OpenMAX codecs, session management, time-synchronized rendering, transport
control, and DRM.</p>

<p>Stagefright also supports integration with custom hardware codecs provided by
you. To set a hardware path to encode and decode media, you must implement a
hardware-based codec as an OpenMax IL (Integration Layer) component.</p>

<p class="note"><strong>Note:</strong> Stagefright updates can occur through the
Android <a href="http://source.android.com/security/bulletin/index.html">monthly security
update</a> process and as part of an Android OS release.</p>

<h2 id="architecture">Architecture</h2>
<p>Media applications interact with the Android native multimedia framework
according to the following architecture.</p>
<img src="http://source.android.com/devices/media/images/ape_fwk_media.png" alt="Android media architecture"
id="figure1" /><p class="img-caption"><strong>Figure 1.</strong> Media
architecture</p>

<dl>
<dt>Application Framework</dt>
<dd>At the application framework level is application code that utilizes
<a href="http://developer.android.com/reference/android/media/package-summary.html">android.media</a>
APIs to interact with the multimedia hardware.</dd>

<dt>Binder IPC</dt>
<dd>The Binder IPC proxies facilitate communication over process boundaries.
They are located in the <code>frameworks/av/media/libmedia</code> directory and
begin with the letter "I".</dd>

<dt>Native Multimedia Framework</dt>
<dd>At the native level, Android provides a multimedia framework that utilizes
the Stagefright engine for audio and video recording and playback. Stagefright
comes with a default list of supported software codecs and you can implement
your own hardware codec by using the OpenMax integration layer standard. For
more implementation details, see the MediaPlayer and Stagefright components
located in <code>frameworks/av/media</code>.</dd>

<dt>OpenMAX Integration Layer (IL)</dt>
<dd>The OpenMAX IL provides a standardized way for Stagefright to recognize and
use custom hardware-based multimedia codecs called components. You must provide
an OpenMAX plugin in the form of a shared library named
<code>libstagefrighthw.so</code>. This plugin links Stagefright with your custom
codec components, which must be implemented according to the OpenMAX IL
component standard.</dd>
</dl>

<h2 id="codecs">Implementing custom codecs</h2>
<p>Stagefright comes with built-in software codecs for common media formats, but
you can also add your own custom hardware codecs as OpenMAX components. To do
this, you must create the OMX components and an OMX plugin that hooks together
your custom codecs with the Stagefright framework. For example components, see
the <code>hardware/ti/omap4xxx/domx/</code>; for an example plugin for the
Galaxy Nexus, see <code>hardware/ti/omap4xx/libstagefrighthw</code>.</p>

<p>To add your own codecs:</p>
<ol>
<li>Create your components according to the OpenMAX IL component standard. The
component interface is located in the
<code>frameworks/native/include/media/OpenMAX/OMX_Component.h</code> file. To
learn more about the OpenMAX IL specification, refer to the
<a href="http://www.khronos.org/openmax/">OpenMAX website</a>.</li>
<li>Create a OpenMAX plugin that links your components with the Stagefright
service. For the interfaces to create the plugin, see
<code>frameworks/native/include/media/hardware/OMXPluginBase.h</code> and
<code>HardwareAPI.h</code> header files.</li>
<li>Build your plugin as a shared library with the name
<code>libstagefrighthw.so</code> in your product Makefile. For example:
<br>
<p><pre>LOCAL_MODULE := libstagefrighthw</pre></p>
<p>In your device's Makefile, ensure you declare the module as a product
package:</p>
<pre>
PRODUCT_PACKAGES += \
  libstagefrighthw \
  ...
</pre></li></ol>

<h2 id="expose">Exposing codecs to the framework</h2>
<p>The Stagefright service parses the <code>system/etc/media_codecs.xml</code>
and <code>system/etc/media_profiles.xml</code> to expose the supported codecs
and profiles on the device to app developers via the
<code>android.media.MediaCodecList</code> and
<code>android.media.CamcorderProfile</code> classes. You must create both files
in the <code>device/&lt;company&gt;/&lt;device&gt;/</code> directory
and copy this over to the system image's <code>system/etc</code> directory in
your device's Makefile. For example:</p>
<pre>
PRODUCT_COPY_FILES += \
  device/samsung/tuna/media_profiles.xml:system/etc/media_profiles.xml \
  device/samsung/tuna/media_codecs.xml:system/etc/media_codecs.xml \
</pre>

<p>For complete examples, seee <code>device/samsung/tuna/media_codecs.xml</code>
and <code>device/samsung/tuna/media_profiles.xml</code> .</p>

<p class="note"><strong>Note:</strong> As of Android 4.1, the
<code>&lt;Quirk&gt;</code> element for media codecs is no longer supported.</p>

    </div>

      <div class="content-footer-sac"
                    itemscope itemtype="http://schema.org/SiteNavigationElement">
        <div class="layout-content-col col-9" style="padding-top:4px">
        </div>
        
        <div class="paging-links layout-content-col col-4">
          
        </div>
        
      </div>
      
      
    </div> <!-- end jd-content -->
  <div id="footer" class="wrap" >
  <style>.feedback { float: right !Important }</style>
  <div class="feedback">
    <a href="index.html#" class="button" onclick=" try {
      userfeedback.api.startFeedback({'productId':'715571','authuser':'1'});return false;}catch(e){}">Site Feedback</a>
  </div>
  <div id="copyright">
    
  Except as noted, this content is 
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and 
  restrictions, see the <a href="http://source.android.com/license.html">Content 
  License</a>.
  </div>
    <div id="footerlinks">
    
  <p>
    <a href="http://source.android.com/source/index.html">About Android</a>&nbsp;&nbsp;|&nbsp;
    <a href="http://source.android.com/source/community.html">Community</a>&nbsp;&nbsp;|&nbsp;
    <a href="http://source.android.com/legal.html">Legal</a>&nbsp;&nbsp;|&nbsp;
  </p>
  </div>

</div><!-- end doc-content -->

</div> <!-- end body-content --> 






</body>
</html>



