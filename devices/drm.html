<!DOCTYPE html>











































































































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<meta name="Description" content="This document provides an overview of the Android DRM framework, and introduces the interfaces a DRM plug-in must implement. This document does not describe robustness rules or compliance rules that may be defined by a DRM scheme. The Android platformâ€¦">

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" />
<title>DRM | Android Open Source Project</title>

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="https://fonts.googleapis.com/css?family=Roboto:regular,medium,thin,italic,mediumitalic,bold" title="roboto">
<link href="../assets/css/default.css" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="https://www.google.com/jsapi" type="text/javascript"></script>
<script src="../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "/";
  
  var devsite = false;
  
</script>
<script src="../assets/js/docs.js" type="text/javascript"></script>

<script src="../navtree_data.js" type="text/javascript"></script>


<script type="text/javascript" src="https://www.gstatic.com/feedback/api.js"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45455297-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body class="gc-documentation 
  " itemscope itemtype="http://schema.org/Article">
<a name="top"></a>

  
    <!-- Header -->
    <div id="header">
        <div class="wrap" id="header-wrap">
          <div class="col-3 saclogo">
          <a href="../index.html">
            <img src="../assets/images/sac_logo.png"
                srcset="/assets/images/sac_logo@2x.png 2x"
                width="123" height="25" alt="Android Open Source Project" />
          </a>
          </div>
            <ul class="nav-x col-9">
                <li class="source">
                  <a href="../source/index.html" 
                  >Source</a></li>
                <li class="devices"><a href="index.html" class="selected"
                  >Devices</a></li>
                <li class="security"><a href="../security/index.html" 
                  >Security</a></li>
                <li class="compatibility last"><a href="../compatibility/index.html" 
                  >Compatibility</a></li>
            </ul>
            <!-- New Search -->
            <div class="menu-container">
            <div class="moremenu">
    <div id="more-btn"></div>
  </div>
  <div class="morehover" id="moremenu">
    <div class="top"></div>
    <div class="mid">
      <div class="header">Android Sites</div>
      <ul>
        <li class="active"><a>Android Open Source Project</a></li>
        <li><a href="http://www.android.com">Android.com</a></li>
        <li><a href="http://developer.android.com">Android Developers</a></li>
      </ul>
      <!-- <div class="header">Support</div>
      <ul>
        <li><a href="/support.html">Developer Support</a></li>
      </ul> -->
      <br class="clearfix" />
    </div>
    <div class="bottom"></div>
  </div>

  <div class="search" id="search-container">
    <div class="search-inner">
      <div id="search-btn"></div>
      <div class="left"></div>
      <form onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
onkeydown="return search_changed(event, true, '/')"
onkeyup="return search_changed(event, false, '/')" />
      </form>
      <div class="right"></div>
        <a class="close hide">close</a>
        <div class="left"></div>
        <div class="right"></div>
    </div>
  </div>
  <div id="search_filtered_wrapper">
    <div id="search_filtered_div" class="no-display">
        <ul id="search_filtered">
        </ul>
    </div>
  </div>

  </div>
  <!-- /New Search> -->
        </div>
    </div>
    <!-- /Header -->

  <div id="searchResults" class="wrap" style="display:none;">
          <h2 id="searchTitle">Results</h2>
          <div id="leftSearchControl" class="search-control">Loading...</div>
  </div>

  
  
  
    
  <div class="wrap clearfix" id="body-content">
    <div class="col-4" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <div id="devdoc-nav" class="scroll-pane">
<a class="totop" href="drm.html#top" data-g-event="left-nav-top">to top</a>

<!--
    Copyright 2015 The Android Open Source Project

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<ul id="nav">
  <li class="nav-section">  <!-- Begin nav section, Device Interfaces -->
    <div class="nav-section-header">
      <a href="index.html">
        <span class="en">Interfaces</span>
      </a>
    </div>
    <ul>
  <li class="nav-section">
  <div class="nav-section-header">
      <a href="accessories/index.html">
        <span class="en">Accessories</span>
      </a>
    </div>
    <ul>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="accessories/audio.html">
            <span class="en">Audio Accessories</span>
          </a>
        </div>
        <ul>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="accessories/headset/index.html">
            <span class="en">Headset</span>
          </a>
        </div>
        <ul>
          <li><a href="accessories/headset/specification.html">Specification</a></li>
          <li><a href="accessories/headset/requirements.html">Requirements</a></li>
          <li><a href="accessories/headset/testing.html">Testing</a></li>
        </ul>
      </li>
        </ul>
      </li>
  <li class="nav-section">
  <div class="nav-section-header">
      <a href="accessories/custom.html">
        <span class="en">Custom Accessories</span>
      </a>
    </div>
    <ul>
      <li class="nav-section">
        <div class="nav-section-header"><a href="accessories/protocol.html"><span class="en">AOA</span>
        </a>
        </div>
        <ul>
          <li><a href="accessories/aoa2.html">AOA 2.0</a></li>
          <li><a href="accessories/aoa.html">AOA 1.0</a></li>
        </ul>
        </li>
        <div class="nav-section-header"><a href="accessories/stylus.html"><span class="en">Stylus</span>
        </a>
        </div>
       </ul>
     </li>
    </ul>
      <li class="nav-section">
      <div class="nav-section-header">
        <a href="audio/index.html">
          <span class="en">Audio</span>
        </a>
      </div>
        <ul>
          <li><a href="audio/terminology.html">Terminology</a></li>
          <li class="nav-section">
            <div class="nav-section-header">
              <a href="audio/implement.html">
                <span class="en">Implementation</span>
              </a>
            </div>
            <ul>
              <li><a href="audio/implement-policy.html">Policy Configuration</a></li>
              <li><a href="audio/implement-shared-library.html">Shared Library</a></li>
              <li><a href="audio/implement-pre-processing.html">Pre-processing Effects</a></li>
            </ul>
         </li>
          <li><a href="audio/data_formats.html">Data Formats</a></li>
          <li><a href="audio/attributes.html">Attributes</a></li>
          <li><a href="audio/warmup.html">Warmup</a></li>
          <li class="nav-section">
            <div class="nav-section-header">
              <a href="audio/latency.html">
                <span class="en">Latency</span>
              </a>
            </div>
            <ul>
              <li><a href="audio/latency_contrib.html">Contributors</a></li>
              <li><a href="audio/latency_design.html">Design</a></li>
              <li><a href="audio/latency_measure.html">Measure</a></li>
              <li><a href="audio/testing_circuit.html">Light Testing Circuit</a></li>
              <li><a href="audio/loopback.html">Audio Loopback Dongle</a></li>
              <li><a href="audio/latency_measurements.html">Measurements</a></li>
              <li><a href="audio/latency_app.html">Applications</a></li>
            </ul>
          </li>
          <li><a href="audio/avoiding_pi.html">Priority Inversion</a></li>
          <li><a href="audio/src.html">Sample Rate Conversion</a></li>
          <li><a href="audio/debugging.html">Debugging</a></li>
          <li class="nav-section">
            <div class="nav-section-header">
              <a href="audio/midi.html">
                <span class="em">MIDI</span>
              </a>
            </div>
            <ul>
              <li><a href="audio/midi_arch.html">MIDI Architecture</a></li>
              <li><a href="audio/midi_test.html">MIDI Test Procedure</a></li>
            </ul>
          <li><a href="audio/usb.html">USB Digital Audio</a></li>
          <li><a href="audio/tv.html">TV Audio</a></li>
        </ul>
      </li>
      <li><a href="automotive.html">Automotive</a></li>
      <li><a href="bluetooth.html">Bluetooth</a></li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="camera/index.html">
            <span class="en">Camera</span>
          </a>
        </div>
        <ul>
          <li><a href="camera/camera3.html">Camera HAL3</a></li>
          <li><a href="camera/camera3_requests_hal.html">HAL Subsystem</a></li>
          <li><a href="camera/camera3_metadata.html">Metadata and Controls</a></li>
          <li><a href="camera/camera3_3Amodes.html">3A Modes and State</a></li>
          <li><a href="camera/camera3_crop_reprocess.html">Output and Cropping</a></li>
          <li><a href="camera/camera3_error_stream.html">Errors and Streams</a></li>
          <li><a href="camera/camera3_requests_methods.html">Request Creation</a></li>
          <li><a href="camera/versioning.html">Version Support</a></li>
        </ul>
      </li>

      <li><a href="drm.html">DRM</a></li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="graphics/index.html">
            <span class="en">Graphics</span>
          </a>
        </div>
        <ul>
         <li class="nav-section">
            <div class="nav-section-header">
              <a href="graphics/architecture.html">
                <span class="en">Architecture</span>
              </a>
            </div>
            <ul>
              <li><a href="graphics/arch-bq-gralloc.html">BufferQueue</a></li>
              <li><a href="graphics/arch-sf-hwc.html">SurfaceFlinger and HWC</a></li>
              <li><a href="graphics/arch-sh.html">Surface and SurfaceHolder</a></li>
              <li><a href="graphics/arch-egl-opengl.html">OpenGL ES</a></li>
              <li><a href="graphics/arch-vulkan.html">Vulkan</a></li>
              <li><a href="graphics/arch-sv-glsv.html">SurfaceView</a></li>
              <li><a href="graphics/arch-st.html">SurfaceTexture</a></li>
              <li><a href="graphics/arch-tv.html">TextureView</a></li>
              <li><a href="graphics/arch-gameloops.html">Game Loops</a></li>
            </ul>
         </li>
         <li class="nav-section">
            <div class="nav-section-header">
              <a href="graphics/implement.html">
                <span class="en">Implementing</span>
              </a>
            </div>
            <ul>
              <li><a href="graphics/implement-hwc.html">Hardware Composer HAL</a></li>
              <li><a href="graphics/implement-vsync.html">VSYNC</a></li>
              <li><a href="graphics/implement-vulkan.html">Vulkan</a></li>
              <li><a href="graphics/implement-vdisplays.html">Virtual Displays</a></li>
            </ul>
         </li>
         <li class="nav-section">
            <div class="nav-section-header">
              <a href="graphics/testing.html">
                <span class="en">OpenGL ES Testing</span>
              </a>
            </div>
            <ul>
              <li><a href="graphics/build-tests.html">Building test programs</a></li>
              <li><a href="graphics/port-tests.html">Porting the test framework</a></li>
              <li><a href="graphics/run-tests.html">Running the tests</a></li>
              <li><a href="graphics/automate-tests.html">Automating the tests</a></li>
              <li><a href="graphics/test-groups.html">Using special test groups</a></li>
              <li><a href="graphics/cts-integration.html">Integrating with Android CTS</a></li>
            </ul>
         </li>
        </ul> </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="input/index.html">
            <span class="en">Input</span>
          </a>
        </div>
        <ul>
          <li><a href="input/overview.html">Overview</a></li>
          <li><a href="input/key-layout-files.html">Key Layout Files</a></li>
          <li><a href="input/key-character-map-files.html">Key Character Map Files</a></li>
          <li><a href="input/input-device-configuration-files.html">Input Device Configuration Files</a></li>
          <li><a href="input/migration-guide.html">Migration Guide</a></li>
          <li><a href="input/keyboard-devices.html">Keyboard Devices</a></li>
          <li><a href="tech/input/touch-devices.html">Touch Devices</a></li>
          <li><a href="tech/input/dumpsys.html">Diagnostics</a></li>
          <li><a href="input/getevent.html">Getevent</a></li>
          <li><a href="input/validate-keymaps.html">Validate Keymaps</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="media.html">
            <span class="en">Media</span>
          </a>
        </div>
        <ul>
          <li><a href="media/framework-hardening.html">Framework
          Hardening</a></li>
          <li><a href="media/soc.html">SoC Dependencies</a></li>
          <li><a href="media/oem.html">OEM Dependencies</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="sensors/index.html">
            <span class="en">Sensors</span>
          </a>
        </div>
        <ul>
          <li><a href="sensors/sensor-stack.html">Sensor stack</a></li>
          <li><a href="sensors/report-modes.html">Reporting modes</a></li>
          <li><a href="sensors/suspend-mode.html">Suspend mode</a></li>
          <li><a href="sensors/power-use.html">Power consumption</a></li>
          <li><a href="sensors/interaction.html">Interaction</span></a></li>
          <li><a href="sensors/hal-interface.html">HAL interface</a></li>
          <li><a href="sensors/batching.html">Batching</a></li>
          <li><a href="sensors/sensor-types.html">Sensor types</a></li>
          <li><a href="sensors/versioning.html">Version deprecation</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="https://source.android.com/devices/storage/index.html">
            <span class="en">Storage</span>
          </a>
        </div>
        <ul>
          <li><a href="storage/traditional.html">Traditional Storage</a></li>
          <li><a href="storage/adoptable.html">Adoptable Storage</a></li>
          <li><a href="storage/config.html">Device Configuration</a></li>
          <li><a href="storage/config-example.html">Configuration Examples</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="tv/index.html">
            <span class="en">TV</span>
          </a>
        </div>
        <ul>
          <li><a href="tv/HDMI-CEC.html">HDMI-CEC control service</a></li>
          <li><a href="tv/reference-tv-app.html">Reference TV App</a></li>
        </ul>
      </li>
    </ul>
  </li> <!-- End nav-section, Device Interfaces-->


  <li class="nav-section"> <!--Begin nav-section, Core Technologies-->
    <div class="nav-section-header">
      <a href="tech/index.html">
        <span class="en">Core Technologies</span>
      </a>
    </div>

    <ul>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="tech/dalvik/index.html">
          <span class="en">ART and Dalvik</span></a>
        </div>
        <ul>
          <li><a href="tech/dalvik/dalvik-bytecode.html">Bytecode Format</a></li>
          <li><a href="tech/dalvik/dex-format.html">.Dex Format</a></li>
          <li><a href="tech/dalvik/instruction-formats.html">Instruction Formats</a></li>
          <li><a href="tech/dalvik/constraints.html">Constraints</a></li>
          <li><a href="tech/dalvik/configure.html">Configuration</a></li>
          <li><a href="tech/dalvik/gc-debug.html">Garbage Collection</a></li>
          <li><a href="tech/dalvik/jit-compiler.html">JIT Compilation</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="tech/config/index.html">
              <span class="en">Configuration</span>
            </a>
        </div>
        <ul>
          <li><a href="tech/config/carrier.html">Carrier Customization</a></li>
          <li><a href="tech/config/connect_tests.html">Connectivity Tests</a></li>
          <li><a href="tech/config/filesystem.html">File System</a></li>
          <li><a href="tech/kernel.html">Kernel Configuration</a></li>
          <li><a href="tech/config/kernel_network_tests.html">Kernel Network Tests</a></li>
          <li><a href="tech/config/low-ram.html">Low RAM</a></li>
          <li><a href="tech/config/namespaces_libraries.html">Namespaces for Libraries</a></li>
          <li><a href="tech/config/renderer.html">OpenGLRenderer</a></li>
          <li><a href="tech/config/runtime_perms.html">Runtime Permissions</a></li>
          <li><a href="tech/config/uicc.html">UICC</a></li>
          <li><a href="tech/config/voicemail.html">Visual Voicemail</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="tech/connect/index.html">
              <span class="en">Connectivity</span>
            </a>
        </div>
        <ul>
          <li><a href="tech/connect/block-numbers.html">Block Phone Numbers</a></li>
          <li><a href="tech/connect/call-notification.html">Call Notifications</a></li>
          <li><a href="tech/connect/data-saver.html">Data Saver Mode</a></li>
          <li><a href="tech/connect/felica.html">Host Card Emulation of FeliCa</a></li>
          <li><a href="tech/connect/ril.html">Radio Interface Layer (RIL)</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="tech/datausage/index.html">
            <span class="en">Data Usage</span>
          </a>
        </div>
        <ul>
          <li><a href="tech/datausage/iface-overview.html">Network interface statistics overview</a></li>
          <li><a href="tech/datausage/excluding-network-types.html">Excluding Network Types from Data Usage</a></li>
          <li><a href="tech/datausage/tethering-data.html">Tethering Data</a></li>
          <li><a href="tech/datausage/usage-cycle-resets-dates.html">Usage Cycle Reset Dates</a></li>
          <li><a href="tech/datausage/kernel-overview.html">Kernel Overview</a></li>
          <li><a href="tech/datausage/tags-explained.html">Data Usage Tags Explained</a></li>
          <li><a href="tech/datausage/kernel-changes.html">Kernel Changes</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="tech/debug/index.html">
            <span class="en">Debugging</span>
          </a>
        </div>
        <ul>
          <li><a href="tech/debug/asan.html">AddressSanitizer</a></li>
          <li><a href="tech/debug/dumpsys.html">Dumpsys</a></li>
          <li><a href="tech/debug/native-memory.html">Native Memory Use</a></li>
          <li><a href="tech/debug/netstats.html">Network Use</a></li>
          <li><a href="tech/debug/procstats.html">RAM Use</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="tech/admin/index.html">
          <span class="en">Device Administration</span></a>
        </div>
        <ul>
          <li><a href="tech/admin/implement.html">Implementation</a></li>
          <li><a href="tech/admin/multi-user.html">Multiple Users</a></li>
          <li><a href="tech/admin/managed-profiles.html">Managed Profiles</a></li>
          <li><a href="tech/admin/provision.html">Provisioning</a></li>
          <li><a href="tech/admin/multiuser-apps.html">Multiuser Apps</a></li>
          <li><a href="tech/admin/enterprise-telephony.html">Enterprise Telephony</a></li>
          <li><a href="tech/admin/testing-provision.html">Testing Device Provisioning</a></li>
          <li><a href="tech/admin/testing-setup.html">Testing Device Administration</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="tech/display/index.html">
              <span class="en">Display Settings</span></a>
        </div>
        <ul>
          <li><a href="tech/display/dnd.html">Do Not Disturb</a></li>
          <li><a href="tech/display/multi-window.html">Multi-Window</a></li>
          <li><a href="tech/display/hdr.html">HDR Video</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header empty">
          <a href="halref/index.html">
            <span class="en">HAL File Reference</span>
          </a>
        </div>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
            <a href="tech/ota/index.html">
              <span class="en">OTA Updates</span>
            </a>
        </div>
        <ul>
          <li><a href="tech/ota/tools.html">OTA Tools</a></li>
          <li><a href="tech/ota/block.html">Block-based OTA</a></li>
          <li><a href="tech/ota/inside_packages.html">Inside OTA Packages</a></li>
          <li><a href="tech/ota/device_code.html">Device-Specific Code</a></li>
          <li><a href="tech/ota/reduce_size.html">Reducing OTA Size</a></li>
          <li><a href="tech/ota/sign_builds.html">Signing Builds for Release</a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header">
          <a href="tech/power/index.html"><span class="en">Power</span></a>
        </div>
        <ul>
          <li><a href="tech/power/mgmt.html">Power Management</a></li>
          <li><a href="tech/power/performance.html">Performance Management</a></li>
          <li><a href="tech/power/component.html">Component Power</a></li>
          <li><a href="tech/power/device.html">Device Power</a></li>
          <li><a href="tech/power/values.html">Power Values</a></li>
          <li><a href="tech/power/batterystats.html">Battery Use</a>
          </li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="tech/test_infra/tradefed/index.html">
            <span class="en">Testing Infrastructure</span>
          </a>
        </div>
        <ul>
          <li><a href="tech/test_infra/tradefed/fundamentals/index.html">Start Here</a></li>
          <li><a href="tech/test_infra/tradefed/fundamentals/machine_setup.html">Machine Setup</a></li>
          <li><a href="tech/test_infra/tradefed/fundamentals/devices.html">Working with Devices</a></li>
          <li><a href="tech/test_infra/tradefed/fundamentals/lifecycle.html">Test Lifecycle</a></li>
          <li><a href="tech/test_infra/tradefed/fundamentals/options.html">Option Handling</a></li>
          <li><a href="tech/test_infra/tradefed/full_example.html">An End-to-End Example</a></li>
          <li id="tradefed-tree-list" class="nav-section">
            <div class="nav-section-header">
              <a href="../reference/packages.html">
                <span class="en">Package Index</span>
              </a>
            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li> <!-- End nav-section, Core Technologies -->
</ul> 


      </div>
      <script type="text/javascript">
        showTradefedRefTree();
      </script>
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>

  




<div class="col-12" id="doc-col" >


  
    
      
        <h1 itemprop="name" >DRM</h1>
      
    
  


  
  <div id="jd-content">

    <div class="jd-descr" itemprop="articleBody">
    <!--
    Copyright 2015 The Android Open Source Project

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->

<div id="qv-wrapper">
  <div id="qv">
    <h2>In this document</h2>
    <ol id="auto-toc">
    </ol>
  </div>
</div>

<img style="float: right; margin: 0px 15px 15px 15px;" src="images/ape_fwk_hal_drm.png" alt="Android DRM HAL icon"/>

<p>This document provides an overview of the Android DRM framework, and
introduces the interfaces a DRM plug-in must implement. This document does not
describe robustness rules or compliance rules that may be defined by a DRM
scheme.</p>

<h2 id="introduction">Introduction</h2>

<p>The Android platform provides an extensible DRM framework that lets
applications manage rights-protected content according to the license
constraints associated with the content. The DRM framework supports many DRM
schemes; which DRM schemes a device supports is up to the device manufacturer.
The DRM framework introduced in Android 3.0 provides a unified interface for
application developers and hides the complexity of DRM operations. The DRM
framework provides a consistent operation mode for protected and non-protected
content. DRM schemes can define very complex usage models by license metadata.
The DRM framework provides the association between DRM content and license, and
handles the rights management. This enables the media player to be abstracted
from DRM-protected or non-protected content. See <a
href="https://developer.android.com/reference/android/media/MediaDrm.html">MediaDrm</a>
for the class to obtain keys for decrypting protected media streams.</p>

 <img src="images/ape_fwk_drm.png" alt="Android DRM HAL" />

<p class="img-caption"><strong>Figure 1.</strong> DRM Hardware Abstraction
Layer</p>

<p>
Availability of rich digital content is important to users on mobile devices. To
make their content widely available, Android developers and digital content
publishers need a consistent DRM implementation supported across the Android
ecosystem. To make that digital content available on Android devices and to ensure at least one consistent DRM available across all
devices, Google provides DRM without license fees on compatible Android devices.
On Android 3.0 and higher platforms, the DRM plug-in is integrated with the
Android DRM framework and can use hardware-backed protection to secure premium
content and user credentials.
</p>

<p>
The content protection provided by the DRM plug-in depends on the security and
content protection capabilities of the underlying hardware platform. The
hardware capabilities of the device include hardware secure boot to establish a
chain of trust of security and protection of cryptographic keys. Content
protection capabilities of the device include protection of decrypted frames in
the device and content protection via a trusted output protection mechanism. Not
all hardware platforms support all of the above security and content protection
features. Security is never implemented in a single place in the
stack, but instead relies on the integration of hardware, software, and
services. The combination of hardware security functions, a trusted boot
mechanism, and an isolated secure OS for handling security functions is critical
to providing a secure device.</p>


<h2 id="architecture">Architecture</h2>
<p>The DRM framework is designed to be implementation agnostic and
abstracts the details of the specific DRM scheme implementation in a
scheme-specific DRM plug-in. The DRM framework includes simple APIs to handle
complex DRM operations, register users and devices to online DRM services,
extract constraint information from the license, associate DRM content and its
license, and finally decrypt DRM content.</p>

<p>The Android DRM framework is implemented in two architectural layers:</p>
<ul>
<li>A DRM framework API, which is exposed to applications through the Android
  application framework and runs through the Dalvik VM for standard
  applications.</li>
<li>A native code DRM manager, which implements the DRM framework and exposes an
  interface for DRM plug-ins (agents) to handle rights management and decryption
  for various DRM schemes.</li>
</ul>

 <img src="images/ape_fwk_drm_2.png" alt="Android DRM Framework" />

<p class="img-caption"><strong>Figure 2.</strong> DRM framework</p>

<p>For details, refer to the <a
href="http://developer.android.com/reference/android/drm/package-summary.html">Android
DRM package reference</a>.</p>

<h2 id="plug-ins">Plug-ins</h2>
<p>As shown in the figure below, the DRM framework uses a plug-in architecture
to support various DRM schemes. The DRM manager service runs in an independent
process to ensure isolated execution of DRM plug-ins. Each API call from
DrmManagerClient to DrmManagerService goes across process boundaries by using
the binder IPC mechanism. The DrmManagerClient provides a Java programming
language implementation as a common interface to runtime applications; it
also provides a DrmManagerClient-native implementation as the interface to
native modules. The caller of DRM framework accesses only the DrmManagerClient
and does not have to be aware of each DRM scheme. </p>

 <img src="images/ape_fwk_drm_plugins.png" alt="Android DRM Plug-in" />

<p class="img-caption"><strong>Figure 3.</strong> DRM framework with plug-ins</p>

<p>Plug-ins are loaded automatically when DrmManagerService is launched. As
shown in the figure below, the DRM plug-in manager loads/unloads all the
available plug-ins. The DRM framework loads plug-ins automatically by finding
them under:<br/>
<code>/system/lib/drm/plugins/native/</code></p>
 
<img src="images/ape_fwk_drm_plugins_life.png" alt="Android DRM Plug-in Lifecycle" />

<p class="img-caption"><strong>Figure 4.</strong> DRM plug-in lifecycle</p>

<p>The plug-in developer should ensure the plug-in is located in the DRM
framework plug-in discovery directory. See implementation instructions below for details.</p>

<h2 id="implementation">Implementation</h2>

<h3 id="IDrmEngine">IDrmEngine</h3>

<p>IDrmEngine is an interface with a set of APIs for DRM use cases. Plug-in
developers must implement the interfaces specified in IDrmEngine and the
listener interfaces specified below. The interface definition is available in
the source tree at:<p/>
<code>
&lt;platform_root&gt;/frameworks/av/drm/libdrmframework/plugins/common/include
</code>

<h3 id="DrmInfo">DRM Info</h3>
<p>DrmInfo is a wrapper class that wraps the protocol for communicating with the
DRM server. Server registration, deregistration, license acquisition, or any other
server-related transaction can be achieved by processing an instance of DrmInfo.
The protocol should be described by the plug-in in XML format. Each DRM plug-in
would accomplish the transaction by interpreting the protocol. The DRM framework
defines an API to retrieve an instance of DrmInfo called acquireDrmInfo().</p>

<code>DrmInfo* acquireDrmInfo(int uniqueId, const DrmInfoRequest* drmInfoRequest);</code>
<p>Retrieves necessary information for registration, deregistration or rights
acquisition information. See <a
href="http://developer.android.com/reference/android/drm/DrmInfoRequest.html">DrmInfoRequest</a> for more information.</p>

<code>DrmInfoStatus* processDrmInfo(int uniqueId, const DrmInfo* drmInfo);</code>
<p>processDrmInfo() behaves asynchronously and the results of the transaction can
be retrieved either from OnEventListener or OnErrorListener.</p>

<h3 id="drm-rights">DRM rights</h3>

<p>The association of DRM content and the license is required to allow playback
of DRM content. Once the association has been made, the license will be handled in
the DRM framework so the Media Player application is abstracted from the existence
of license.</p>

<code>int checkRightsStatus(int uniqueId, const String8&amp; path, int
action);</code>

<p>Check whether the given content has valid rights or not.  The input
parameters are the content file path where the content was saved and the action
to query rights for, for example: Action::DEFAULT, Action::PLAY.  Returns the
status of the rights for the protected content, such as
RightsStatus::RIGHTS_VALID, RightsStatus::RIGHTS_EXPIRED.</p>

<code>status_t saveRights(int uniqueId, const DrmRights&amp; drmRights, const String8&amp; rightsPath, const String8&amp; contentPath);</code>

<p>Save DRM rights to the specified rights path and make association with content path.
The input parameters are the DrmRights to be saved, the rights file path where rights
are to be saved, and the content file path where content was saved.</p>

<h3 id="metadata">License Metadata</h3>
<p>License metadata such as license expiry time, repeatable count and etc., may be
embedded inside the rights of the protected content. The Android DRM framework
provides APIs to return constraints associated with input content. See <a
href="http://developer.android.com/reference/android/drm/DrmManagerClient.html">DrmManagerClient</a>
for more information.</p>

<code>DrmConstraints* getConstraints(int uniqueId, const String path, int
action);</code>
<p>The getConstraint function call returns key-value pairs of constraints
embedded in protected content. To retrieve the constraints, the uniqueIds (the
Unique identifier for a session and path of the protected content) are required.
The action, defined as Action::DEFAULT, Action::PLAY, etc., is also required.</p>

 <img src="images/ape_fwk_drm_retrieve_license.png" alt="Android DRM License Metadata" />

<p class="img-caption"><strong>Figure 5.</strong> Retrieve license metadata</p>

<code>DrmMetadata* getMetadata(int uniqueId, const String path);</code>
<p>Get metadata information associated with input content for a given path of the
protected content to return key-value pairs of metadata.</p>

<h3 id="metadata">Decrypt session</h3>
<p>To maintain the decryption session, the caller of the DRM framework must
invoke openDecryptSession() at the beginning of the decryption sequence.
openDecryptSession() asks each DRM plug-in if it can handle input DRM
content.</p>
<code>
status_t openDecryptSession(
   int uniqueId, DecryptHandle* decryptHandle, int fd, off64_t offset, off64_t length);
</code>

<p>The above call allows you to save DRM rights to specified rights path and make
association with content path. DrmRights parameter is the rights to be saved,
file path where rights should be and content file path where content should be
saved.</p>

<h3 id="listeners">DRM plug-in Listeners</h3>

<p>Some APIs in DRM framework behave asynchronously in a DRM transaction. An
application can register three listener classes to DRM framework.</p>

<ul>
<li>OnEventListener for results of asynchronous APIs</li>
<li>OnErrorListener for receiving errors of asynchronous APIs</li>
<li>OnInfoListener for any supplementary information during DRM
transactions.</li>
</ul>

<h3 id="source">Source</h3>

<p>The Android DRM framework includes a couple of samples, a passthru plug-in
and a forward lock plug-in, which can be found at:<br/>
<code>
&lt;platform_root&gt;/frameworks/av/drm/libdrmframework/plugins/passthru<br/>
&lt;platform_root&gt;/frameworks/av/drm/libdrmframework/plugins/forward-lock
</code></p>

<h3 id="build">Build and Integration</h3>

<p>Add the following to the Android.mk of the plug-in implementation. The
passthruplugin is used as a sample.</p>

<code>
PRODUCT_COPY_FILES +=
$(TARGET_OUT_SHARED_LIBRARIES)/&lt;plugin_library&gt;:system/lib/drm/plugins/native/&lt;plugin_library&gt;
e.g.,<br/>
PRODUCT_COPY_FILES += $(TARGET_OUT_SHARED_LIBRARIES)/
libdrmpassthruplugin.so:system/lib/drm/plugins/native/libdrmpassthruplugin.so
</code>
<br/>
<br/>
<p>Plug-in developers must  locate their respective plug-ins under this
directory like so:<br/>
<code>/system/lib/drm/plugins/native/libdrmpassthruplugin.so</code></p>

    </div>

      <div class="content-footer-sac"
                    itemscope itemtype="http://schema.org/SiteNavigationElement">
        <div class="layout-content-col col-9" style="padding-top:4px">
        </div>
        
        <div class="paging-links layout-content-col col-4">
          
        </div>
        
      </div>
      
      
    </div> <!-- end jd-content -->
  <div id="footer" class="wrap" >
  <style>.feedback { float: right !Important }</style>
  <div class="feedback">
    <a href="drm.html#" class="button" onclick=" try {
      userfeedback.api.startFeedback({'productId':'715571','authuser':'1'});return false;}catch(e){}">Site Feedback</a>
  </div>
  <div id="copyright">
    
  Except as noted, this content is 
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and 
  restrictions, see the <a href="../license.html">Content 
  License</a>.
  </div>
    <div id="footerlinks">
    
  <p>
    <a href="../source/index.html">About Android</a>&nbsp;&nbsp;|&nbsp;
    <a href="../source/community.html">Community</a>&nbsp;&nbsp;|&nbsp;
    <a href="../legal.html">Legal</a>&nbsp;&nbsp;|&nbsp;
  </p>
  </div>

</div><!-- end doc-content -->

</div> <!-- end body-content --> 






</body>
</html>



