<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Android Hardware Abstraction Layer: hardware/libhardware/include/hardware/vr.h File Reference</title>
<link href="http://source.android.com/devices/halref/tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://www.gstatic.com/external_hosted/source_android_com/sac_doxygen_jquery.js"></script>
<script type="text/javascript" src="http://source.android.com/devices/halref/dynsections.js"></script>
<link href="http://source.android.com/devices/halref/navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://source.android.com/devices/halref/resize.js"></script>
<script type="text/javascript" src="http://source.android.com/devices/halref/navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="http://source.android.com/devices/halref/doxygen.css" rel="stylesheet" type="text/css" />
<link href="http://source.android.com/devices/halref/hal_doxygen.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45455297-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="header">
            <table width=80%>
              <tr>
                <td><a href="http://source.android.com/index.html"><img src="http://source.android.com/assets/images/sac_logo.png" width="123" height="25" alt="Android Developers" /></td>
                <td><a class=toptab href="http://source.android.com/source/index.html">Source</a></td>
                <td><a class=devices href="http://source.android.com/devices/index.html">Devices</a></td>
                <td><a class=toptab href="http://source.android.com/security/index.html">Security</a></td>
                <td><a class=toptab href="http://source.android.com/compatibility/index.html">Compatibility</a></td>
                <td width=20%></td>
              </tr>
            </table>
  </div>
<hr class=light>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('vr_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="vr_8h.html#nested-classes">Data Structures</a> &#124;
<a href="vr_8h.html#define-members">Macros</a> &#124;
<a href="vr_8h.html#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">vr.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br/>
<code>#include &lt;sys/cdefs.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="hardware_8h_source.html">hardware/hardware.h</a>&gt;</code><br/>
</div>
<p><a href="vr_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvr__module.html">vr_module</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a10fff251d6c29224adcb4e2ac2c783e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vr_8h.html#a10fff251d6c29224adcb4e2ac2c783e7">VR_HARDWARE_MODULE_ID</a>&#160;&#160;&#160;&quot;vr&quot;</td></tr>
<tr class="separator:a10fff251d6c29224adcb4e2ac2c783e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ec28ab78163ff4dbe9bd95b30f03fb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vr_8h.html#ac7ec28ab78163ff4dbe9bd95b30f03fb">VR_MODULE_API_VERSION_1_0</a>&#160;&#160;&#160;<a class="el" href="hardware_8h.html#a63da7e839f5673d40c1408c506e87080">HARDWARE_MODULE_API_VERSION</a>(1, 0)</td></tr>
<tr class="separator:ac7ec28ab78163ff4dbe9bd95b30f03fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aeca9562f93ba78024c9233d9d6524460"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structvr__module.html">vr_module</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="vr_8h.html#aeca9562f93ba78024c9233d9d6524460">vr_module_t</a></td></tr>
<tr class="separator:aeca9562f93ba78024c9233d9d6524460"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a10fff251d6c29224adcb4e2ac2c783e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VR_HARDWARE_MODULE_ID&#160;&#160;&#160;&quot;vr&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vr_8h_source.html#l00026">26</a> of file <a class="el" href="vr_8h_source.html">vr.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac7ec28ab78163ff4dbe9bd95b30f03fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VR_MODULE_API_VERSION_1_0&#160;&#160;&#160;<a class="el" href="hardware_8h.html#a63da7e839f5673d40c1408c506e87080">HARDWARE_MODULE_API_VERSION</a>(1, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="vr_8h_source.html#l00028">28</a> of file <a class="el" href="vr_8h_source.html">vr.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="aeca9562f93ba78024c9233d9d6524460"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structvr__module.html">vr_module</a>  <a class="el" href="vr_8h.html#aeca9562f93ba78024c9233d9d6524460">vr_module_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implement this HAL to receive callbacks when a virtual reality (VR) application is being used. VR applications characteristically have a number of special display and performance requirements, including:</p>
<ul>
<li>Low sensor latency - Total end-to-end latency from the IMU, accelerometer, and gyro to an application-visible callback must be extremely low (&lt;5ms typically). This is required for HIFI sensor support.</li>
<li>Low display latency - Total end-to-end latency from the GPU draw calls to the actual display update must be as low as possible. This is achieved by using SurfaceFlinger in a single-buffered mode, and assuring that draw calls are synchronized with the display scanout correctly. This behavior is exposed via an EGL extension to applications. See below for the EGL extensions needed for this.</li>
<li>Low-persistence display - Display persistence settings must be set as low as possible while still maintaining a reasonable brightness. For a typical display running at 60Hz, pixels should be illuminated for &lt;=3.5ms to be considered low-persistence. This avoids ghosting during movements in a VR setting, and should be enabled from the <a class="el" href="lights_8h.html">lights.h</a> HAL when BRIGHTNESS_MODE_LOW_PERSISTENCE is set.</li>
<li>Consistent performance of the GPU and CPU - When given a mixed GPU/CPU workload for a VR application with bursts of work at regular intervals several times a frame, the CPU scheduling should ensure that the application render thread work is run consistently within 1ms of when scheduled, and completed before the end of the draw window. To this end, a single CPU core must be reserved for solely for the currently running VR application's render thread while in VR mode, and made available in the "top-app" cpuset. Likewise, an appropriate CPU, GPU, and bus clockrate must be maintained to ensure that the rendering workload finishes within the time allotted to render each frame when the POWER_HINT_SUSTAINED_PERFORMANCE flag has been set in the <a class="el" href="power_8h.html">power.h</a> HAL while in VR mode when the device is not being thermally throttled.</li>
<li>Required EGL extensions must be present - Any GPU settings required to allow the above capabilities are required, including the EGL extensions: EGL_ANDROID_create_native_client_buffer, EGL_ANDROID_front_buffer_auto_refresh, EGL_EXT_protected_content, EGL_KHR_mutable_render_buffer, EGL_KHR_reusable_sync, and EGL_KHR_wait_sync.</li>
<li>Accurate thermal reporting - Accurate thermal temperatures and limits must be reported in the <a class="el" href="thermal_8h.html">thermal.h</a> HAL. Specifically, the current skin temperature must accurately be reported for DEVICE_TEMPERATURE_SKIN and the vr_throttling_threshold reported for this device must accurately report the temperature limit above which the device's thermal governor throttles the CPU, GPU, and/or bus clockrates below the minimum necessary for consistent performance (see previous bullet point).</li>
</ul>
<p>In general, vendors implementing this HAL are expected to use set_vr_mode as a hint to enable VR-specific performance tuning needed for any of the above requirements, and to turn on any device features optimal for VR display modes. The set_vr_mode call may simply do nothing if no optimizations are available or necessary to meet the above requirements.</p>
<p>No methods in this HAL will be called concurrently from the Android framework. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f4316de2dfb04db90651672103de31d6.html">hardware</a></li><li class="navelem"><a class="el" href="dir_86044c7f411a47507592ba07f9498427.html">libhardware</a></li><li class="navelem"><a class="el" href="dir_8b3e604cec1d4acc2594697d6aa41052.html">include</a></li><li class="navelem"><a class="el" href="http://source.android.com/devices/halref/dir_6b11132f1a015b03f2670f21bef1d871.html">hardware</a></li><li class="navelem"><a class="el" href="vr_8h.html">vr.h</a></li>
    <li class="footer">Generated on Mon Jun 20 2016 18:43:21 for Android Hardware Abstraction Layer by
    <a href="http://source.android.com/index.html">
    <img class="footer" src="http://source.android.com/images/Android_Robot_100.png" alt="Android"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
