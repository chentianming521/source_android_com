<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Android Hardware Abstraction Layer: camera3_stream Struct Reference</title>
<link href="http://source.android.com/devices/halref/tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://www.gstatic.com/external_hosted/source_android_com/sac_doxygen_jquery.js"></script>
<script type="text/javascript" src="http://source.android.com/devices/halref/dynsections.js"></script>
<link href="http://source.android.com/devices/halref/navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://source.android.com/devices/halref/resize.js"></script>
<script type="text/javascript" src="http://source.android.com/devices/halref/navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="http://source.android.com/devices/halref/doxygen.css" rel="stylesheet" type="text/css" />
<link href="http://source.android.com/devices/halref/hal_doxygen.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45455297-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div id="header">
            <table width=80%>
              <tr>
                <td><a href="http://source.android.com/index.html"><img src="http://source.android.com/assets/images/sac_logo.png" width="123" height="25" alt="Android Developers" /></td>
                <td><a class=toptab href="http://source.android.com/source/index.html">Source</a></td>
                <td><a class=devices href="http://source.android.com/devices/index.html">Devices</a></td>
                <td><a class=toptab href="http://source.android.com/security/index.html">Security</a></td>
                <td><a class=toptab href="http://source.android.com/compatibility/index.html">Compatibility</a></td>
                <td width=20%></td>
              </tr>
            </table>
  </div>
<hr class=light>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('structcamera3__stream.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="structcamera3__stream.html#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">camera3_stream Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a8208773ff9fe4758071a683e23acb3f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a8208773ff9fe4758071a683e23acb3f1">stream_type</a></td></tr>
<tr class="separator:a8208773ff9fe4758071a683e23acb3f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325272ddd9a962f05deb905101d25cbd"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a325272ddd9a962f05deb905101d25cbd">width</a></td></tr>
<tr class="separator:a325272ddd9a962f05deb905101d25cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ad4f820ce4e75cda0686fcaad5168be"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a6ad4f820ce4e75cda0686fcaad5168be">height</a></td></tr>
<tr class="separator:a6ad4f820ce4e75cda0686fcaad5168be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a317afff57d87a89158c2b038d37b2b08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a317afff57d87a89158c2b038d37b2b08">format</a></td></tr>
<tr class="separator:a317afff57d87a89158c2b038d37b2b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab76c7fc8a62bed535b434fbd1f034eac"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#ab76c7fc8a62bed535b434fbd1f034eac">usage</a></td></tr>
<tr class="separator:ab76c7fc8a62bed535b434fbd1f034eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7d4df3f9c130cf93d6a95d76419394d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#ad7d4df3f9c130cf93d6a95d76419394d">max_buffers</a></td></tr>
<tr class="separator:ad7d4df3f9c130cf93d6a95d76419394d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6505c37d4ff95854b8b00527e4d9fa"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a8b6505c37d4ff95854b8b00527e4d9fa">priv</a></td></tr>
<tr class="separator:a8b6505c37d4ff95854b8b00527e4d9fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e60d1f884c65231dadf349587c60c78"><td class="memItemLeft" align="right" valign="top">android_dataspace_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a3e60d1f884c65231dadf349587c60c78">data_space</a></td></tr>
<tr class="separator:a3e60d1f884c65231dadf349587c60c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b174cfb62c7f343a1ed1cda3a372e38"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a2b174cfb62c7f343a1ed1cda3a372e38">rotation</a></td></tr>
<tr class="separator:a2b174cfb62c7f343a1ed1cda3a372e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a101a19e5506a5768877d7ee451115dc2"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcamera3__stream.html#a101a19e5506a5768877d7ee451115dc2">reserved</a> [7]</td></tr>
<tr class="separator:a101a19e5506a5768877d7ee451115dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>camera3_stream_t:</p>
<p>A handle to a single camera input or output stream. A stream is defined by the framework by its buffer resolution and format, and additionally by the HAL with the gralloc usage flags and the maximum in-flight buffer count.</p>
<p>The stream structures are owned by the framework, but pointers to a <a class="el" href="structcamera3__stream.html">camera3_stream</a> passed into the HAL by configure_streams() are valid until the end of the first subsequent configure_streams() call that <em>does not</em> include that <a class="el" href="structcamera3__stream.html">camera3_stream</a> as an argument, or until the end of the close() call.</p>
<p>All <a class="el" href="structcamera3__stream.html">camera3_stream</a> framework-controlled members are immutable once the <a class="el" href="structcamera3__stream.html">camera3_stream</a> is passed into configure_streams(). The HAL may only change the HAL-controlled parameters during a configure_streams() call, except for the contents of the private pointer.</p>
<p>If a configure_streams() call returns a non-fatal error, all active streams remain valid as if configure_streams() had not been called.</p>
<p>The endpoint of the stream is not visible to the camera HAL device. In DEVICE_API_VERSION_3_1, this was changed to share consumer usage flags on streams where the camera is a producer (OUTPUT and BIDIRECTIONAL stream types) see the usage field below. </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01523">1523</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a3e60d1f884c65231dadf349587c60c78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">android_dataspace_t data_space</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A field that describes the contents of the buffer. The format and buffer dimensions define the memory layout and structure of the stream buffers, while dataSpace defines the meaning of the data within the buffer.</p>
<p>For most formats, dataSpace defines the color space of the image data. In addition, for some formats, dataSpace indicates whether image- or depth-based data is requested. See system/core/include/system/graphics.h for details of formats and valid dataSpace values for each format.</p>
<p>Version information:</p>
<p>&lt; CAMERA_DEVICE_API_VERSION_3_3:</p>
<p>Not defined and should not be accessed. dataSpace should be assumed to be HAL_DATASPACE_UNKNOWN, and the appropriate color space, etc, should be determined from the usage flags and the format.</p>
<p>= CAMERA_DEVICE_API_VERSION_3_3:</p>
<p>Always set by the camera service. HAL must use this dataSpace to configure the stream to the correct colorspace, or to select between color and depth outputs if supported. The dataspace values are the legacy definitions in graphics.h</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_4:</p>
<p>Always set by the camera service. HAL must use this dataSpace to configure the stream to the correct colorspace, or to select between color and depth outputs if supported. The dataspace values are set using the V0 dataspace definitions in graphics.h </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01648">1648</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="a317afff57d87a89158c2b038d37b2b08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int format</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The pixel format for the buffers in this stream. Format is a value from the HAL_PIXEL_FORMAT_* list in system/core/include/system/graphics.h, or from device-specific headers.</p>
<p>If HAL_PIXEL_FORMAT_IMPLEMENTATION_DEFINED is used, then the platform gralloc module will select a format based on the usage flags provided by the camera device and the other endpoint of the stream.</p>
<p>&lt;= CAMERA_DEVICE_API_VERSION_3_1:</p>
<p>The camera HAL device must inspect the buffers handed to it in the subsequent register_stream_buffers() call to obtain the implementation-specific format details, if necessary.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>register_stream_buffers() won't be called by the framework, so the HAL should configure the ISP and sensor pipeline based purely on the sizes, usage flags, and formats for the configured streams. </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01565">1565</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6ad4f820ce4e75cda0686fcaad5168be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t height</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The height in pixels of the buffers in this stream </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01542">1542</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad7d4df3f9c130cf93d6a95d76419394d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t max_buffers</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The maximum number of buffers the HAL device may need to have dequeued at the same time. The HAL device may not have more buffers in-flight from this stream than this value. </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01608">1608</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8b6505c37d4ff95854b8b00527e4d9fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* priv</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A handle to HAL-private information for the stream. Will not be inspected by the framework code. </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01614">1614</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="a101a19e5506a5768877d7ee451115dc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* reserved[7]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01677">1677</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2b174cfb62c7f343a1ed1cda3a372e38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rotation</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The required output rotation of the stream, one of the camera3_stream_rotation_t values. This must be inspected by HAL along with stream width and height. For example, if the rotation is 90 degree and the stream width and height is 720 and 1280 respectively, camera service will supply buffers of size 720x1280, and HAL should capture a 1280x720 image and rotate the image by 90 degree counterclockwise. The rotation field is no-op when the stream type is input. Camera HAL must ignore the rotation field for an input stream.</p>
<p>&lt;= CAMERA_DEVICE_API_VERSION_3_2:</p>
<p>Not defined and must not be accessed. HAL must not apply any rotation on output images.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_3:</p>
<p>Always set by camera service. HAL must inspect this field during stream configuration and returns -EINVAL if HAL cannot perform such rotation. HAL must always support CAMERA3_STREAM_ROTATION_0, so a configure_streams() call must not fail for unsupported rotation if rotation field of all streams is CAMERA3_STREAM_ROTATION_0. </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01674">1674</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8208773ff9fe4758071a683e23acb3f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int stream_type</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The type of the stream, one of the camera3_stream_type_t values. </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01532">1532</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab76c7fc8a62bed535b434fbd1f034eac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t usage</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The gralloc usage flags for this stream, as needed by the HAL. The usage flags are defined in <a class="el" href="gralloc_8h.html">gralloc.h</a> (GRALLOC_USAGE_*), or in device-specific headers.</p>
<p>For output streams, these are the HAL's producer usage flags. For input streams, these are the HAL's consumer usage flags. The usage flags from the producer and the consumer will be combined together and then passed to the platform gralloc HAL module for allocating the gralloc buffers for each stream.</p>
<p>Version information:</p>
<p>== CAMERA_DEVICE_API_VERSION_3_0:</p>
<p>No initial value guaranteed when passed via configure_streams(). HAL may not use this field as input, and must write over this field with its usage flags.</p>
<p>&gt;= CAMERA_DEVICE_API_VERSION_3_1:</p>
<p>For stream_type OUTPUT and BIDIRECTIONAL, when passed via configure_streams(), the initial value of this is the consumer's usage flags. The HAL may use these consumer flags to decide stream configuration. For stream_type INPUT, when passed via configure_streams(), the initial value of this is 0. For all streams passed via configure_streams(), the HAL must write over this field with its usage flags. </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01601">1601</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<a class="anchor" id="a325272ddd9a962f05deb905101d25cbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t width</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The width in pixels of the buffers in this stream </p>

<p>Definition at line <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html#l01537">1537</a> of file <a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>hardware/libhardware/include/hardware/<a class="el" href="http://source.android.com/devices/halref/camera3_8h_source.html">camera3.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structcamera3__stream.html">camera3_stream</a></li>
    <li class="footer">Generated on Mon Jun 20 2016 18:43:21 for Android Hardware Abstraction Layer by
    <a href="http://source.android.com/index.html">
    <img class="footer" src="http://source.android.com/images/Android_Robot_100.png" alt="Android"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
